/*!
 * pixi-svg - v2.3.0
 * Compiled Thu, 08 Apr 2021 20:38:34 UTC
 *
 * pixi-svg is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
import{Graphics as t}from"@pixi/graphics";import e from"d-path-parser";import i from"tinycolor2";var r=function(t){function r(e){t.call(this),e&&this.drawSVG(e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.drawSVG=function(t){if("string"==typeof t){var e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}if(!t)throw new Error("Missing <svg> element in SVG constructor");return this._svgFill(t),this._svgChildren(t.children),this},r.prototype._svgChildren=function(t,e){void 0===e&&(e=!1);for(var i=0;i<t.length;i++){var r=t[i];switch(this._svgFill(r,e),r.nodeName.toLowerCase()){case"path":this._svgPath(r);break;case"circle":case"ellipse":this._svgCircle(r);break;case"rect":this._svgRect(r);break;case"polygon":this._svgPoly(r,!0);break;case"polyline":this._svgPoly(r);break;case"g":break;default:console.info("[PIXI.SVG] <"+r.nodeName+"> elements unsupported")}this._svgChildren(r.children,!0)}},r.prototype._hexToUint=function(t){if("#"===t[0])return 3===(t=t.substr(1)).length&&(t=t.replace(/([a-f0-9])/gi,"$1$1")),parseInt(t,16);var e=i(t).toRgb();return(e.r<<16)+(e.g<<8)+e.b},r.prototype._svgCircle=function(t){var e="r",i="r",r="elipse"===t.nodeName;r&&(e+="x",i+="y");var o=parseFloat(t.getAttribute(i)),a=parseFloat(t.getAttribute(e)),s=t.getAttribute("cx"),n=t.getAttribute("cy"),l=0,c=0;null!==s&&(l=parseFloat(s)),null!==n&&(c=parseFloat(n)),r?this.drawEllipse(l,c,o,a):this.drawCircle(l,c,o)},r.prototype._svgRect=function(t){var e=parseFloat(t.getAttribute("x")),i=parseFloat(t.getAttribute("y")),r=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),a=parseFloat(t.getAttribute("rx"));a?this.drawRoundedRect(e,i,r,o,a):this.drawRect(e,i,r,o)},r.prototype._convertStyleName=function(t){return t.trim().replace("-width","Width").replace(/.*-(line)?/,"")},r.prototype._svgStyle=function(t){var e=this,i=t.getAttribute("style"),r={fill:t.getAttribute("fill"),opacity:t.getAttribute("opacity"),stroke:t.getAttribute("stroke"),strokeWidth:t.getAttribute("stroke-width"),cap:t.getAttribute("stroke-linecap"),join:t.getAttribute("stroke-linejoin"),miterLimit:t.getAttribute("stroke-miterlimit")};return null!==i&&i.split(";").forEach((function(t){var i=t.split(":"),o=i[0],a=i[1];if(o){var s=e._convertStyleName(o);r[s]||(r[s]=a.trim())}})),r},r.prototype._svgPoly=function(t,e){var i=t.getAttribute("points").split(/[ ,]/g).map((function(t){return parseInt(t,10)}));this.drawPolygon(i),e&&this.closePath()},r.prototype._svgFill=function(t,e){var i=this._svgStyle(t),r=i.fill,o=i.opacity,a=i.stroke,s=i.strokeWidth,n=i.cap,l=i.join,c=i.miterLimit,p=null!==a?1:0,h=null!==s?parseFloat(s):p,u=null!==a?this._hexToUint(a):this.lineColor;r?"none"===r?this.beginFill(0,0):this.beginFill(this._hexToUint(r),null!==o?parseFloat(o):1):e||this.beginFill(0),this.lineStyle({width:null===a&&null===s&&e?this.line.width:h,color:null===a&&e?this.line.color:u,cap:null===n&&e?this.line.cap:n,join:null===l&&e?this.line.join:l,miterLimit:null===c&&e?this.line.miterLimit:parseFloat(c)}),t.getAttribute("fill-rule")&&console.info('[PIXI.SVG] "fill-rule" attribute is not supported')},r.prototype._svgPath=function(t){for(var i,r,o=t.getAttribute("d"),a=e(o.trim()),s=0;s<a.length;s++){var n=a[s];switch(n.code){case"m":this.moveTo(i+=n.end.x,r+=n.end.y);break;case"M":this.moveTo(i=n.end.x,r=n.end.y);break;case"H":this.lineTo(i=n.value,r);break;case"h":this.lineTo(i+=n.value,r);break;case"V":this.lineTo(i,r=n.value);break;case"v":this.lineTo(i,r+=n.value);break;case"Z":this.closePath();break;case"L":this.lineTo(i=n.end.x,r=n.end.y);break;case"l":this.lineTo(i+=n.end.x,r+=n.end.y);break;case"C":this.bezierCurveTo(n.cp1.x,n.cp1.y,n.cp2.x,n.cp2.y,i=n.end.x,r=n.end.y);break;case"c":var l=i,c=r;this.bezierCurveTo(l+n.cp1.x,c+n.cp1.y,l+n.cp2.x,c+n.cp2.y,i+=n.end.x,r+=n.end.y);break;case"s":case"q":var p=i,h=r;this.quadraticCurveTo(p+n.cp.x,h+n.cp.y,i+=n.end.x,r+=n.end.y);break;case"S":case"Q":this.quadraticCurveTo(n.cp.x,n.cp.y,i=n.end.x,r=n.end.y);break;case"a":var u=Math.PI/180;this.arc(i+=n.end.x,r+=n.end.y,n.rotation*u,n.radii.x*u,n.radii.y*u,n.clockwise);break;case"A":var d=Math.PI/180;this.arc(i=n.end.x,r=n.end.y,n.rotation*d,n.radii.x*d,n.radii.y*d,n.clockwise);break;default:console.info("[PIXI.SVG] Draw command not supported:",n.code,n)}}},r}(t);export{r as SVG};
//# sourceMappingURL=pixi-svg.es.js.map
